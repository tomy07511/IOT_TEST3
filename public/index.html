<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Panel de Sensores</title>

  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>

  <!-- Leaflet + Fullscreen plugin -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css" />
  <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js"></script>

  <!-- Socket.IO -->
  <script src="/socket.io/socket.io.js"></script>

 <style>
  :root{
    --bg:#0b1d2a;
    --card:#102a3c;
    --accent:#00e5ff;
    --muted:#1e3a4c;
    --text:#eaf6f8;
  }
  html,body{height:100%;margin:0;font-family:"Segoe UI",system-ui,Arial; background:var(--bg); color:var(--text);}
  header{padding:12px 18px;text-align:center;color:var(--accent);}
  .container { width:95%; margin:14px auto; max-width:1200px; }
  .card {
    background:var(--card);
    border-radius:12px;
    padding:12px;
    box-shadow:0 6px 18px rgba(0,229,255,0.06);
    margin-bottom:16px;
  }
  h1,h2,h3{margin:6px 0;color:var(--accent)}
  
  /* MAPA AL FINAL - ÚLTIMO ELEMENTO */
  #map { 
    width:100%; 
    height:420px; 
    border-radius:8px; 
    order: 3; /* Última posición */
  }
  
  /* GRÁFICAS PRIMERO */
  #graficaPlotly { 
    width:100%; 
    min-height:480px; 
    border-radius:8px; 
    order: 1; /* Primera posición */
  }
  
  /* BOTÓN EN MEDIO */
  #btnHistoricos {
    display:inline-block;
    margin:14px 0 40px 0;
    padding:10px 16px;
    background:var(--accent);
    color:#002;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    order: 2; /* Segunda posición */
  }
  
  /* CONTENEDOR FLEX PARA REORDENAR */
  .container {
    display: flex;
    flex-direction: column;
  }
  
  @media (max-width:420px){
    #map{height:320px}
    #graficaPlotly{min-height:320px}
  }
</style>
</head>
<body>
  <header><h2>Panel de Sensores — IoT</h2></header>

  <div class="container">
    <!-- PLOTLY - PRIMERO -->
    <div class="card">
      <h3>Serie de tiempos (Range Slider & Selector)</h3>
      <div id="graficaPlotly"></div>
    </div>

    <!-- BOTÓN HISTÓRICOS - SEGUNDO -->
    <div style="text-align:center; order: 2;">
      <button id="btnHistoricos" onclick="window.open('historicos.html', '_blank')">
        Ver Datos Históricos Tabla
      </button>
    </div>

    <!-- MAPA - AL FINAL -->
    <div class="card" style="order: 3;">
      <h3>Ubicación GPS</h3>
      <div id="map"></div>
    </div>
  </div>

  <script src="/script.js"></script>
</body>
</html>