<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estaci√≥n Meteorol√≥gica</title>
  
  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
  
  <style>
    :root {
      --bg: #0b1d2a;
      --card: #102a3c;
      --accent: #00e5ff;
      --muted: #1e3a4c;
      --text: #eaf6f8;
    }
    
    html, body {
      height: 100%;
      margin: 0;
      font-family: "Segoe UI", system-ui, Arial;
      background: var(--bg);
      color: var(--text);
    }
    
    header {
      padding: 12px 18px;
      text-align: center;
      color: var(--accent);
    }
    
    .container {
      width: 95%;
      margin: 14px auto;
      max-width: 1200px;
    }
    
    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 6px 18px rgba(0, 229, 255, 0.06);
      margin-bottom: 20px;
    }
    
    h1, h2, h3 {
      margin: 6px 0;
      color: var(--accent);
    }
    
    /* Grid para las gr√°ficas y la br√∫jula */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .graph-container {
      background: var(--card);
      border-radius: 8px;
      padding: 15px;
      height: 300px;
    }
    
    /* Br√∫jula/Rosa de los vientos */
    .compass-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--card);
      border-radius: 8px;
      padding: 30px;
      height: 300px;
    }
    
    .compass {
      position: relative;
      width: 200px;
      height: 200px;
      border: 3px solid var(--accent);
      border-radius: 50%;
      background: var(--muted);
    }
    
    .compass-rose {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 180px;
      height: 180px;
      border-radius: 50%;
      background: conic-gradient(
        from 0deg,
        #ff6b6b 0deg 45deg,
        #4ecdc4 45deg 135deg,
        #45b7d1 135deg 225deg,
        #96ceb4 225deg 315deg,
        #ff6b6b 315deg 360deg
      );
      opacity: 0.7;
    }
    
    .compass-needle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 4px;
      height: 80px;
      background: #ff0000;
      transform-origin: 50% 0;
      transform: translate(-50%, -50%) rotate(0deg);
      transition: transform 0.5s ease;
      z-index: 2;
    }
    
    .compass-needle::after {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-bottom: 15px solid #ff0000;
    }
    
    .compass-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      z-index: 3;
    }
    
    .compass-directions {
      position: absolute;
      width: 100%;
      height: 100%;
      font-size: 12px;
      font-weight: bold;
      color: var(--text);
    }
    
    .direction-n { position: absolute; top: 5px; left: 50%; transform: translateX(-50%); }
    .direction-e { position: absolute; top: 50%; right: 5px; transform: translateY(-50%); }
    .direction-s { position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); }
    .direction-w { position: absolute; top: 50%; left: 5px; transform: translateY(-50%); }
    
    /* Indicadores de datos actuales */
    .current-data {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .data-card {
      background: var(--muted);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      border-left: 4px solid var(--accent);
    }
    
    .data-value {
      font-size: 24px;
      font-weight: bold;
      color: var(--accent);
      margin: 10px 0;
    }
    
    .data-label {
      font-size: 14px;
      color: var(--text);
      opacity: 0.8;
    }
    
    /* Animaci√≥n de carga */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
      color: var(--accent);
      font-size: 16px;
    }
  </style>
</head>
<body>
  <header>
    <h2>üå§Ô∏è Estaci√≥n Meteorol√≥gica</h2>
  </header>

  <div class="container">
    <!-- Indicadores de datos actuales -->
    <div class="current-data">
      <div class="data-card">
        <div class="data-label">Temperatura Actual</div>
        <div class="data-value" id="current-temp">-- ¬∞C</div>
        <div class="data-label">Ambiente</div>
      </div>
      
      <div class="data-card">
        <div class="data-label">Velocidad del Viento</div>
        <div class="data-value" id="current-wind">-- km/h</div>
        <div class="data-label">Promedio</div>
      </div>
      
      <div class="data-card">
        <div class="data-label">Direcci√≥n del Viento</div>
        <div class="data-value" id="current-direction">--</div>
        <div class="data-label">Rumbo actual</div>
      </div>
      
      <div class="data-card">
        <div class="data-label">Humedad</div>
        <div class="data-value" id="current-humidity">-- %</div>
        <div class="data-label">Relativa</div>
      </div>
    </div>

    <!-- Grid principal: Gr√°ficas y Br√∫jula -->
    <div class="dashboard-grid">
      <!-- Gr√°fica de Temperatura -->
      <div class="card">
        <h3>üìà Temperatura Ambiente</h3>
        <div class="graph-container" id="temp-chart">
          <div class="loading">Cargando gr√°fica de temperatura...</div>
        </div>
      </div>
      
      <!-- Gr√°fica de Velocidad del Viento -->
      <div class="card">
        <h3>üí® Velocidad del Viento</h3>
        <div class="graph-container" id="wind-chart">
          <div class="loading">Cargando gr√°fica de viento...</div>
        </div>
      </div>
      
      <!-- Br√∫jula/Rosa de los Vientos -->
      <div class="card">
        <h3>üß≠ Direcci√≥n del Viento</h3>
        <div class="compass-container">
          <div class="compass">
            <div class="compass-rose"></div>
            <div class="compass-needle" id="wind-needle"></div>
            <div class="compass-center"></div>
            <div class="compass-directions">
              <div class="direction-n">N</div>
              <div class="direction-e">E</div>
              <div class="direction-s">S</div>
              <div class="direction-w">O</div>
            </div>
          </div>
          <div style="margin-top: 20px; text-align: center;">
            <div class="data-label">Direcci√≥n actual:</div>
            <div class="data-value" id="wind-direction-text">Norte (0¬∞)</div>
          </div>
        </div>
      </div>
      
      <!-- Gr√°fica de Humedad -->
      <div class="card">
        <h3>üíß Humedad Relativa</h3>
        <div class="graph-container" id="humidity-chart">
          <div class="loading">Cargando gr√°fica de humedad...</div>
        </div>
      </div>
    </div>

    <!-- Informaci√≥n adicional -->
    <div class="card">
      <h3>üìä Resumen Meteorol√≥gico</h3>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
        <div class="data-card">
          <div class="data-label">M√°xima del d√≠a</div>
          <div class="data-value">-- ¬∞C</div>
        </div>
        <div class="data-card">
          <div class="data-label">M√≠nima del d√≠a</div>
          <div class="data-value">-- ¬∞C</div>
        </div>
        <div class="data-card">
          <div class="data-label">R√°faga m√°xima</div>
          <div class="data-value">-- km/h</div>
        </div>
        <div class="data-card">
          <div class="data-label">Presi√≥n atmosf√©rica</div>
          <div class="data-value">-- hPa</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Datos de ejemplo para las gr√°ficas (ser√°n reemplazados con datos reales)
    const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
    
    // Temperaturas de ejemplo
    const temperatures = hours.map((_, i) => {
      const baseTemp = 20;
      const variation = Math.sin(i * Math.PI / 12) * 8;
      return baseTemp + variation;
    });
    
    // Velocidades de viento de ejemplo
    const windSpeeds = hours.map((_, i) => {
      const baseSpeed = 5;
      const variation = Math.random() * 15;
      return baseSpeed + variation;
    });
    
    // Humedad de ejemplo
    const humidity = hours.map((_, i) => {
      const baseHumidity = 60;
      const variation = Math.sin(i * Math.PI / 12) * 20;
      return Math.max(30, Math.min(90, baseHumidity + variation));
    });
    
    // Inicializar gr√°ficas
    function initCharts() {
      // Gr√°fica de Temperatura
      Plotly.newPlot('temp-chart', [{
        x: hours,
        y: temperatures,
        type: 'scatter',
        mode: 'lines+markers',
        line: { color: '#ff7043', width: 3 },
        marker: { size: 4 },
        name: 'Temperatura'
      }], {
        title: '',
        plot_bgcolor: 'transparent',
        paper_bgcolor: 'transparent',
        font: { color: '#eaf6f8' },
        xaxis: { gridcolor: '#1e3a4c', title: 'Hora del d√≠a' },
        yaxis: { gridcolor: '#1e3a4c', title: 'Temperatura (¬∞C)' },
        margin: { t: 30, r: 30, b: 50, l: 50 }
      });
      
      // Gr√°fica de Velocidad del Viento
      Plotly.newPlot('wind-chart', [{
        x: hours,
        y: windSpeeds,
        type: 'scatter',
        mode: 'lines+markers',
        line: { color: '#00e5ff', width: 3 },
        marker: { size: 4 },
        name: 'Velocidad'
      }], {
        title: '',
        plot_bgcolor: 'transparent',
        paper_bgcolor: 'transparent',
        font: { color: '#eaf6f8' },
        xaxis: { gridcolor: '#1e3a4c', title: 'Hora del d√≠a' },
        yaxis: { gridcolor: '#1e3a4c', title: 'Velocidad (km/h)' },
        margin: { t: 30, r: 30, b: 50, l: 50 }
      });
      
      // Gr√°fica de Humedad
      Plotly.newPlot('humidity-chart', [{
        x: hours,
        y: humidity,
        type: 'scatter',
        mode: 'lines+markers',
        line: { color: '#4ecdc4', width: 3 },
        marker: { size: 4 },
        name: 'Humedad'
      }], {
        title: '',
        plot_bgcolor: 'transparent',
        paper_bgcolor: 'transparent',
        font: { color: '#eaf6f8' },
        xaxis: { gridcolor: '#1e3a4c', title: 'Hora del d√≠a' },
        yaxis: { gridcolor: '#1e3a4c', title: 'Humedad (%)' },
        margin: { t: 30, r: 30, b: 50, l: 50 }
      });
    }
    
    // Simular datos actuales
    function updateCurrentData() {
      const currentTemp = temperatures[new Date().getHours()];
      const currentWind = windSpeeds[new Date().getHours()];
      const currentHumidity = humidity[new Date().getHours()];
      
      document.getElementById('current-temp').textContent = `${currentTemp.toFixed(1)} ¬∞C`;
      document.getElementById('current-wind').textContent = `${currentWind.toFixed(1)} km/h`;
      document.getElementById('current-humidity').textContent = `${currentHumidity.toFixed(0)} %`;
      
      // Simular direcci√≥n del viento (√°ngulo en grados)
      const windDirection = Math.floor(Math.random() * 360);
      updateWindDirection(windDirection);
    }
    
    // Actualizar br√∫jula de direcci√≥n del viento
    function updateWindDirection(degrees) {
      const needle = document.getElementById('wind-needle');
      const directionText = document.getElementById('wind-direction-text');
      
      needle.style.transform = `translate(-50%, -50%) rotate(${degrees}deg)`;
      
      // Convertir grados a direcci√≥n cardinal
      const directions = ['Norte', 'Noreste', 'Este', 'Sureste', 'Sur', 'Suroeste', 'Oeste', 'Noroeste'];
      const index = Math.round(degrees / 45) % 8;
      directionText.textContent = `${directions[index]} (${degrees}¬∞)`;
    }
    
    // Inicializar cuando la p√°gina cargue
    document.addEventListener('DOMContentLoaded', function() {
      initCharts();
      updateCurrentData();
      
      // Simular actualizaci√≥n cada 5 segundos
      setInterval(updateCurrentData, 5000);
    });
  </script>
</body>
</html>